/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const e=[{id:1,name:"Throwback Hip Bag",picture:"https://tailwindui.com/img/ecommerce-images/shopping-cart-page-04-product-01.jpg",price:90},{id:2,name:"Medium Stuff Satchel",picture:"https://tailwindui.com/img/ecommerce-images/shopping-cart-page-04-product-02.jpg",price:32},{id:3,name:"Zip Tote Basket",picture:"https://tailwindui.com/img/ecommerce-images/shopping-cart-page-04-product-03.jpg",price:100}],t=[{value:"MOBILE",name:"Mobile"},{value:"HOME",name:"Home"},{value:"WORK",name:"Work"}],a=[{value:"AL",name:"Alabama"},{value:"AK",name:"Alaska"},{value:"AZ",name:"Arizona"},{value:"AR",name:"Arkansas"},{value:"CA",name:"California"},{value:"CO",name:"Colorado"},{value:"CT",name:"Connecticut"},{value:"DE",name:"Delaware"},{value:"DC",name:"District of Columbia"},{value:"FL",name:"Florida"},{value:"GA",name:"Georgia"},{value:"HI",name:"Hawaii"},{value:"ID",name:"Idaho"},{value:"IL",name:"Illinois"},{value:"IN",name:"Indiana"},{value:"IN",name:"Indiana"},{value:"IA",name:"Iowa"},{value:"KS",name:"Kansas"},{value:"KY",name:"Kentucky"},{value:"LA",name:"Louisiana"},{value:"ME",name:"Maine"},{value:"MD",name:"Maryland"},{value:"MA",name:"Massachusetts"},{value:"MI",name:"Michigan"},{value:"MN",name:"Minnesota"},{value:"MS",name:"Mississippi"},{value:"MO",name:"Missouri"},{value:"MT",name:"Montana"},{value:"NE",name:"Nebraska"},{value:"NV",name:"Nevada"},{value:"NH",name:"New Hampshire"},{value:"NJ",name:"New Jersey"},{value:"NM",name:"New Mexico"},{value:"NY",name:"New York"},{value:"NC",name:"North Carolina"},{value:"ND",name:"North Dakota"},{value:"OH",name:"Ohio"},{value:"OK",name:"Oklahoma"},{value:"OR",name:"Oregon"},{value:"PA",name:"Pennsylvania"},{value:"PR",name:"Puerto Rico"},{value:"RI",name:"Rhode Island"},{value:"SC",name:"South Carolina"},{value:"SD",name:"South Dakota"},{value:"TN",name:"Tennessee"},{value:"TX",name:"Texas"},{value:"UT",name:"Utah"},{value:"VT",name:"Vermont"},{value:"VA",name:"Virginia"},{value:"WA",name:"Washington"},{value:"WV",name:"West Virginia"},{value:"WI",name:"Wisconsin"},{value:"WY",name:"Wyoming"}];function r(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function n(e,t,a,r=1){const n=document.createElement("div");return n.setAttribute("class","w-full relative mb-2"),r>1?(n.classList.add("col-span-2"),n.innerHTML=`\n        <input\n            class="form-field w-full py-1 pl-1 pr-8 rounded bg-white border border-gray-500 mb-6 focus-visible:outline-0 focus-visible:border-sky-500 focus-visible:placeholder:invisible peer"\n            name="${e}" id="${e}" placeholder="${a} *" type="${t}" required>\n            <label id="lbl-${e}" data-help="* This is a required field"\n                class="opacity-0 peer-focus-visible:opacity-100 peer-focus-visible:animate-fade py-1 absolute bottom-[3.5rem] left-1 text-gray-700 peer-valid:opacity-100 peer-valid:after:content-['✔'] peer-valid:after:opacity-100 peer-valid:after:top-9 peer-valid:after:left-[26.5rem] peer-focus-visible:peer-invalid:after:content-[attr(data-help)] peer-focus-visible:peer-invalid:after:animate-help transition-all after:absolute after:left-0 after:top-16 after:text-sm after:whitespace-nowrap"\n                for="${e}">${a}\n            </label>\n    \n    `):n.innerHTML=`\n        <input\n            class="form-field w-full py-1 pl-1 pr-8 rounded bg-white border border-gray-500 mb-6 focus-visible:outline-0 focus-visible:border-sky-500 focus-visible:placeholder:invisible peer"\n            name="${e}" id="${e}" placeholder="${a} *" type="${t}" required>\n            <label id="lbl-${e}" data-help="* This is a required field"\n                class="opacity-0 peer-focus-visible:opacity-100 peer-focus-visible:animate-fade py-1 absolute bottom-[3.5rem] left-1 text-gray-700 peer-valid:opacity-100 peer-valid:after:content-['✔'] peer-valid:after:opacity-100 peer-valid:after:top-9 peer-valid:after:left-48 peer-focus-visible:peer-invalid:after:content-[attr(data-help)] peer-focus-visible:peer-invalid:after:animate-help transition-all after:absolute after:left-0 after:top-16 after:text-sm after:whitespace-nowrap"\n                for="${e}">${a}\n            </label>\n    \n    `,n}function i(e,t,a,r=1){const n=document.createElement("div");n.setAttribute("class","w-full relative mb-6"),r>1&&n.classList.add("col-span-2");const i=document.createElement("select");i.setAttribute("class","form-field bg-gray-50 border border-gray-500 text-gray-900 text-sm rounded focus-visible:outline-0 focus-visible:border-sky-500 block w-full p-1"),i.setAttribute("id",e),i.required=!0,i.innerHTML=`<option value="" selected>${t}</option>`;for(let e of a)i.innerHTML+=`\n        <option value="${e.value}">${e.name}</option>\n        `;return n.appendChild(i),n}function o(){const o=document.createElement("div");return o.setAttribute("class","grid grid-cols-2 gap-2 w-1/2 p-4 bg-gray-200 drop-shadow-2xl rounded-md"),o.appendChild(function(){const t=document.createElement("div");return t.classList.add("p-4"),t.innerHTML='\n    <h2 class="mb-2 text-3xl text-left font-semibold text-gray-600 border-b-2 border-b-slate-600">Your cart</h2>\n  ',t.appendChild(function(e){const t=document.createElement("div");let a="",n=0;for(let t of e)a+=`\n        <div class="mt-8 bg-white p-4 border border-gray-500 rounded ">\n            <div class="flow-root">\n            <ul role="list" class="-my-6 divide-y divide-gray-200">\n                <li class="flex py-6">\n                <div class="h-24 w-24 flex-shrink-0 overflow-hidden rounded-md border border-gray-400">\n                    <img src="${t.picture}" class="h-full w-full object-cover object-center">\n                </div>\n\n                <div class="ml-4 flex flex-1 flex-col">\n                    <div>\n                    <div class="flex justify-between text-base font-medium text-gray-900">\n                        <h3>\n                        <a id="item-name-${t.id}" data-id="${t.id}" class="item-name" href="#">${t.name}</a>\n                        </h3>\n                        <p id="item-price-${t.id}" data-price-quantity="${t.price}" data-price="${t.price}" class="prices ml-4">${r(t.price)}</p>\n                    </div>\n                    </div>\n                    <div class="flex flex-1 items-end justify-between text-sm">\n                    <p class="text-gray-500 flex justify-around items-center gap-2"><button data-id="${t.id}" id="btn-increase-quantity-${t.id}" class="btn-increase-quantity drop-shadow rounded-full hover:bg-gray-200"><i class="px-2 py-2 border border-gray-500 rounded-full fa-solid fa-plus"></i></button><input id="input-quantity-${t.id}" class="bg-white border border-gray-500 text-center h-10 w-10 px-2 pr-2 rounded-full text-sm focus:outline-none" type="number" value="1" disabled><button data-id="${t.id}" id="btn-decrease=quantity${t.id}" class="btn-decrease-quantity drop-shadow rounded-full hover:bg-gray-200"><i class="px-2 py-2 border border-gray-500 rounded-full fa-solid fa-minus"></i></button></p>\n\n                    <div class="flex">\n                        <button type="button" class="font-medium text-sky-600 hover:text-sky-500 cursor-not-allowed">Remove</button>\n                    </div>\n                    </div>\n                </div>\n                </li>\n            </div>\n        </div>\n        `,n+=t.price;return a+=`\n        <div id="cart-total-container" class="mt-6 bg-white p-4 border border-gray-500 rounded flex justify-between">\n            <p class="font-semibold text-lg">Total</p>\n            <span data-total="${n}" id="cart-total">${r(n)}</span>\n        </div>\n    `,t.innerHTML=a,t}(e)),t}()),o.appendChild(function(){const e=document.createElement("div");e.setAttribute("class","pt-4"),e.innerHTML='\n    <h2 class="mb-6 text-3xl text-left font-semibold text-gray-600 border-b-2 border-b-slate-600">Buyer info</h2>\n  ';const r=document.createElement("form");return r.setAttribute("class","mt-8 grid grid-cols-2 gap-4"),r.appendChild(n("firstName","text","First name")),r.appendChild(n("lastName","text","Last name")),r.appendChild(n("email","email","Email",2)),r.appendChild(i("country","Country/Region",[{value:"US",name:"United States"}],2)),r.appendChild(i("phoneType","Phone type",t)),r.appendChild(n("phoneNumber","tel","Phone number")),r.appendChild(n("streetAddress1","text","Street address")),r.appendChild(n("streetAddress2","text","Apt., ste., bldg.")),r.appendChild(n("city","text","City")),r.appendChild(i("state","State",a)),r.appendChild(n("zipCode","number","Zip code",2)),e.appendChild(r),e}()),o.appendChild(function(){const e=document.createElement("div");return e.setAttribute("class","col-span-2 flex items-center justify-center"),e.innerHTML='<div class="w-4/5" id="paypal-container"></div>',e}()),o}function l(e,t){void 0===t&&(t={});var a=document.createElement("script");return a.src=e,Object.keys(t).forEach((function(e){a.setAttribute(e,t[e]),"data-csp-nonce"===e&&a.setAttribute("nonce",t["data-csp-nonce"])})),a}function s(e){return window[e]}function u(e,t){if("object"!=typeof e||null===e)throw new Error("Expected an options object.");if(void 0!==t&&"function"!=typeof t)throw new Error("Expected PromisePonyfill to be a function.")}function d(){const e=document.querySelectorAll(".form-field");let t=!0;for(let a of e)""==a.value&&(t=!1);return t}function c(e,t=!0){const a=document.querySelector("#result-message-container"),r=document.querySelector("#result-message"),n=document.querySelector("#close-result-message").children[0];t?(a.classList.replace("bg-green-100","bg-red-100"),a.classList.replace("border-green-400","border-red-400"),a.classList.replace("text-green-700","text-red-700"),n.classList.replace("text-green-500","text-red-500")):(a.classList.replace("bg-red-100","bg-green-100"),a.classList.replace("border-red-400","border-green-400"),a.classList.replace("text-red-700","text-green-700"),n.classList.replace("text-red-500","text-green-500")),a.classList.remove("hidden"),r.innerText=e}function p(){(function(e,t){if(void 0===t&&(t=Promise),u(e,t),"undefined"==typeof document)return t.resolve(null);var a=function(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseUrl&&(t=e.sdkBaseUrl,delete e.sdkBaseUrl);var a,r,n=e,i=Object.keys(n).filter((function(e){return void 0!==n[e]&&null!==n[e]&&""!==n[e]})).reduce((function(e,t){var a,r=n[t].toString();return a=function(e,t){return(t?"-":"")+e.toLowerCase()},"data"===(t=t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,a)).substring(0,4)||"crossorigin"===t?e.attributes[t]=r:e.queryParams[t]=r,e}),{queryParams:{},attributes:{}}),o=i.queryParams,l=i.attributes;return o["merchant-id"]&&-1!==o["merchant-id"].indexOf(",")&&(l["data-merchant-id"]=o["merchant-id"],o["merchant-id"]="*"),{url:"".concat(t,"?").concat((a=o,r="",Object.keys(a).forEach((function(e){0!==r.length&&(r+="&"),r+=e+"="+a[e]})),r)),attributes:l}}(e),r=a.url,n=a.attributes,i=n["data-namespace"]||"paypal",o=s(i);return function(e,t){var a=document.querySelector('script[src="'.concat(e,'"]'));if(null===a)return null;var r=l(e,t),n=a.cloneNode();if(delete n.dataset.uidAuto,Object.keys(n.dataset).length!==Object.keys(r.dataset).length)return null;var i=!0;return Object.keys(n.dataset).forEach((function(e){n.dataset[e]!==r.dataset[e]&&(i=!1)})),i?a:null}(r,n)&&o?t.resolve(o):function(e,t){void 0===t&&(t=Promise),u(e,t);var a=e.url,r=e.attributes;if("string"!=typeof a||0===a.length)throw new Error("Invalid url.");if(void 0!==r&&"object"!=typeof r)throw new Error("Expected attributes to be an object.");return new t((function(e,t){if("undefined"==typeof document)return e();!function(e){var t=e.onSuccess,a=e.onError,r=l(e.url,e.attributes);r.onerror=a,r.onload=t,document.head.insertBefore(r,document.head.firstElementChild)}({url:a,attributes:r,onSuccess:function(){return e()},onError:function(){var e=new Error('The script "'.concat(a,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return t(e)}})}))}({url:r,attributes:n},t).then((function(){var e=s(i);if(e)return e;throw new Error("The window.".concat(i," global variable is not available."))}))})({clientId:"ATHk4BGa5jIYNAoKl17UpzirMfLQE2V97wj31VxvWCdAP91oyuD-N2kol2hZWrd0J-N2de6gPCo-tgRn",locale:"en_US",buyerCountry:"US"}).then((e=>{e.Buttons({onInit:function(e,t){t.disable(),document.querySelector("form").addEventListener("input",(()=>{d()?t.enable():t.disable()}))},onClick:function(){d()||c("You have to fill all the form fields!")},async createOrder(){try{const e={cart:function(){const e=document.querySelectorAll(".item-name"),t=document.querySelector("#cart-total").getAttribute("data-total");let a={};a.total=t;let r=[];for(let t of e){const e=t.getAttribute("data-id"),a=t.innerText,n=document.querySelector(`#input-quantity-${e}`).value,i=document.querySelector(`#item-price-${e}`).getAttribute("data-price");r.push({name:a,quantity:n,unit_amount:{currency_code:"USD",value:i}})}return a.items=r,a}(),payerInfo:function(){const e=document.querySelector("#firstName"),t=document.querySelector("#lastName"),a=document.querySelector("#email"),r=document.querySelector("#country"),n=document.querySelector("#phoneType"),i=document.querySelector("#phoneNumber"),o=document.querySelector("#streetAddress1"),l=document.querySelector("#streetAddress2"),s=document.querySelector("#city"),u=document.querySelector("#state"),d=document.querySelector("#zipCode");return{given_name:e.value,surname:t.value,full_name:`${e.value} ${t.value}`,email_address:a.value,phone_type:n.value,national_number:i.value,address:{address_line_1:o.value,address_line_2:l.value,admin_area_2:s.value,admin_area_1:u.value,postal_code:d.value,country_code:r.value}}}()},t=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(a.id)return a.id;{const e=a?.details?.[0],t=e?`${e.issue} ${e.description} (${a.debug_id})`:JSON.stringify(a);throw new Error(t)}}catch(e){console.error(e),c(`Could not initiate PayPal Checkout...<br><br>${e}`)}},async onApprove(e,t){try{const a=await fetch(`/api/orders/${e.orderID}/capture`,{method:"POST",headers:{"Content-Type":"application/json"}}),r=await a.json(),n=r?.details?.[0];if("INSTRUMENT_DECLINED"===n?.issue)return t.restart();if(n)throw new Error(`${n.description} (${r.debug_id})`);if(!r.purchase_units)throw new Error(JSON.stringify(r));c(`Thank you for buying with us! Your checkout id is ${(r?.purchase_units?.[0]?.payments?.captures?.[0]||r?.purchase_units?.[0]?.payments?.authorizations?.[0]).id}`,!1),console.log("Capture result",r,JSON.stringify(r,null,2))}catch(e){console.error(e),c(`Sorry, your transaction could not be processed...<br><br>${e}`)}}}).render("#paypal-container").catch((e=>{console.error("failed to render the PayPal Buttons",e)}))})).catch((e=>{console.error("failed to load the PayPal JS SDK script",e)}))}function m(){document.body.appendChild(function(){const e=document.createElement("div");return e.setAttribute("id","result-message-container"),e.setAttribute("class","fixed top-2 z-50 hidden w-1/3 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"),e.innerHTML='\n                <span id="result-message" class="block sm:inline">Something seriously bad happened.</span>\n                <span id="close-result-message" class="absolute top-0 bottom-0 right-0 px-4 py-3">\n                <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>\n                </span>\n  ',e}()),document.body.appendChild(function(){const e=document.createElement("div");return e.setAttribute("class","fixed z-40 top-0 left-0 right-0 w-full bg-sky-500 flex justify-between items-center drop-shadow-lg"),e.innerHTML='\n        <h1 class="font-serif font-black text-3xl text-white py-4 px-6 cursor-pointer bg-amber-400 rounded-e-full hover:bg-amber-500 hover:text-slate-100 transition-all"><i class="fa-solid fa-shop"></i>easyPay</h1>\n        <div class="relative text-gray-600">\n            <input type="search" name="search" placeholder="Search" class="bg-white h-10 px-5 pr-10 rounded-full text-sm focus:outline-none">\n            <button type="submit" class="absolute right-0 top-0 mt-3 mr-4">\n                <svg class="h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" width="512px" height="512px">\n                    <path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"/>\n                </svg>\n            </button>\n        </div>\n        <button type="button" class="bg-amber-400 py-4 px-6 rounded-s-full hover:bg-amber-500 hover:text-slate-100 transition-all"><i class="fa-solid fa-cart-shopping text-white"></i></button>\n    ',e}()),document.body.appendChild(o()),function(){const e=document.querySelectorAll(".btn-increase-quantity"),t=document.querySelectorAll(".btn-decrease-quantity");document.querySelectorAll(".prices"),document.querySelector("#cart-total");for(let t of e)t.addEventListener("click",(()=>{const e=t.getAttribute("data-id"),a=document.querySelector(`#item-price-${e}`),n=Number(a.getAttribute("data-price")),i=document.querySelector(`#input-quantity-${e}`),o=document.querySelector("#cart-total");i.value<5&&(i.value++,a.setAttribute("data-price-quantity",""+n*i.value),a.innerText=r(n*i.value),console.log(Number(o.getAttribute("data-total"))+n),o.setAttribute("data-total",Number(o.getAttribute("data-total"))+n),o.innerText=r(Number(o.getAttribute("data-total"))))}));for(let e of t)e.addEventListener("click",(()=>{const t=e.getAttribute("data-id"),a=document.querySelector(`#item-price-${t}`),n=Number(a.getAttribute("data-price")),i=document.querySelector(`#input-quantity-${t}`),o=document.querySelector("#cart-total");i.value>1&&(i.value--,a.setAttribute("data-price-quantity",""+n*i.value),a.innerText=r(n*i.value),console.log(Number(o.getAttribute("data-total"))-n),o.setAttribute("data-total",Number(o.getAttribute("data-total"))-n),o.innerText=r(Number(o.getAttribute("data-total"))))}))}(),function(){const e=document.querySelector("#close-result-message"),t=document.querySelector("#result-message-container");e.addEventListener("click",(()=>{t.classList.add("hidden")}))}(),p()}document.addEventListener("DOMContentLoaded",(()=>{m()}))})();